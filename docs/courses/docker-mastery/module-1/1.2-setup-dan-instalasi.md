# 1.2 Setup dan Instalasi Docker

!!! info "Overview"
Dalam tutorial ini, kita akan belajar cara menginstal Docker di berbagai platform: **Windows**, **macOS**, dan **Linux**. Pilih sesuai dengan sistem operasi yang Anda gunakan.

## ðŸŽ¯ Persyaratan Sistem

Sebelum menginstal Docker, pastikan sistem Anda memenuhi persyaratan minimum:

### Windows

-   **OS:** Windows 10 64-bit (Pro, Enterprise, Education) atau Windows 11
-   **RAM:** Minimum 4GB (direkomendasikan 8GB+)
-   **CPU:** 64-bit processor dengan Second Level Address Translation (SLAT)
-   **Virtualization:** Harus diaktifkan di BIOS/UEFI

### macOS

-   **OS:** macOS 10.15 (Catalina) atau lebih baru
-   **RAM:** Minimum 4GB (direkomendasikan 8GB+)
-   **CPU:** Intel chip atau Apple Silicon

### Linux

-   **OS:** Ubuntu 18.04+, CentOS 7+, Debian 9+, atau distro lain yang didukung
-   **RAM:** Minimum 2GB (direkomendasikan 4GB+)
-   **CPU:** 64-bit architecture

## ðŸªŸ Instalasi di Windows

### Metode 1: Docker Desktop (Direkomendasikan)

Docker Desktop adalah cara termudah untuk menjalankan Docker di Windows.

#### Step 1: Download Docker Desktop

1. Kunjungi [Docker Desktop for Windows](https://www.docker.com/products/docker-desktop/)
2. Klik **"Download Docker Desktop for Windows"**
3. Tunggu download selesai (~500MB)

#### Step 2: Instalasi

1. **Jalankan installer** `Docker Desktop Installer.exe`
2. **Ikuti wizard instalasi:**

    !!! warning "Penting"
    Pastikan opsi **"Use WSL 2 instead of Hyper-V"** dicentang untuk performa yang lebih baik.

3. **Klik Install** dan tunggu proses selesai
4. **Restart komputer** jika diminta

#### Step 3: Verifikasi Instalasi

1. **Buka Command Prompt** atau PowerShell
2. **Jalankan perintah:**

```cmd
docker --version
```

```cmd
docker run hello-world
```

!!! success "Hasil yang Diharapkan"
```
Docker version 24.0.6, build ed223bc

    Hello from Docker!
    This message shows that your installation appears to be working correctly.
    ```

### Metode 2: Docker di WSL 2

Jika Anda menggunakan Windows Subsystem for Linux (WSL 2):

#### Step 1: Install WSL 2

```powershell title="PowerShell (Admin)"
# Enable WSL
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

# Enable Virtual Machine Platform
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

# Restart komputer
shutdown /r /t 0
```

#### Step 2: Install Ubuntu dari Microsoft Store

1. Buka **Microsoft Store**
2. Cari **"Ubuntu 22.04 LTS"**
3. Klik **Install**

#### Step 3: Install Docker Engine di WSL

```bash title="Ubuntu Terminal"
# Update package index
sudo apt-get update

# Install dependencies
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# Add Docker GPG key
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# Add Docker repository
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Install Docker Engine
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# Add user to docker group
sudo usermod -aG docker $USER

# Start Docker service
sudo service docker start
```

## ðŸŽ Instalasi di macOS

### Metode 1: Docker Desktop (Direkomendasikan)

#### Step 1: Download Docker Desktop

=== "Intel Mac" 
    1. Kunjungi [Docker Desktop for Mac](https://www.docker.com/products/docker-desktop/) 
    2. Pilih **"Mac with Intel chip"** 
    3. Download file `.dmg` (~500MB)

=== "Apple Silicon" 
    1. Kunjungi [Docker Desktop for Mac](https://www.docker.com/products/docker-desktop/) 
    2. Pilih **"Mac with Apple chip"** 
    3. Download file `.dmg` (~400MB)

#### Step 2: Instalasi

1. **Buka file `.dmg`** yang sudah didownload
2. **Drag Docker.app** ke folder Applications
3. **Buka Docker** dari Applications atau Launchpad
4. **Ikuti setup wizard:**
    - Accept terms and conditions
    - Authorize dengan password admin
    - Tunggu Docker Engine start

#### Step 3: Verifikasi Instalasi

```bash title="Terminal"
# Cek versi Docker
docker --version

# Test dengan container hello-world
docker run hello-world
```

### Metode 2: Homebrew

Jika Anda menggunakan Homebrew package manager:

```bash title="Terminal"
# Install Docker menggunakan Homebrew
brew install --cask docker

# Buka Docker Desktop
open /Applications/Docker.app

# Verifikasi instalasi
docker --version
docker run hello-world
```

## ðŸ§ Instalasi di Linux

### Ubuntu/Debian

#### Step 1: Uninstall Docker Lama (jika ada)

```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

#### Step 2: Setup Repository

```bash
# Update apt package index
sudo apt-get update

# Install dependencies
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# Add Docker GPG key
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# Setup repository
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

#### Step 3: Install Docker Engine

```bash
# Update package index
sudo apt-get update

# Install Docker Engine, CLI, containerd
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# Verify installation
sudo docker run hello-world
```

#### Step 4: Post-Installation Setup

```bash
# Create docker group
sudo groupadd docker

# Add user to docker group
sudo usermod -aG docker $USER

# Apply group membership
newgrp docker

# Test Docker without sudo
docker run hello-world

# Configure Docker to start on boot
sudo systemctl enable docker.service
sudo systemctl enable containerd.service
```

### CentOS/RHEL/Fedora

#### Step 1: Setup Repository

```bash
# Install required packages
sudo yum install -y yum-utils

# Add Docker repository
sudo yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo
```

#### Step 2: Install Docker Engine

```bash
# Install Docker Engine
sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# Start Docker
sudo systemctl start docker

# Enable Docker on boot
sudo systemctl enable docker

# Test installation
sudo docker run hello-world
```

## â˜ï¸ Instalasi di Virtual Machine

### VMware/VirtualBox

Jika Anda menggunakan VM, ada beberapa hal yang perlu diperhatikan:

#### Persyaratan VM

!!! warning "Nested Virtualization"
Pastikan **nested virtualization** diaktifkan di VM settings untuk menjalankan Docker container.

**VMware:**

```
VM Settings > Processors > Virtualization Engine >
â˜‘ï¸ Virtualize Intel VT-x/EPT or AMD-V/RVI
```

**VirtualBox:**

```
VM Settings > System > Acceleration >
â˜‘ï¸ Enable VT-x/AMD-V
â˜‘ï¸ Enable Nested Paging
```

#### Resource Allocation

| Resource    | Minimum    | Recommended          |
| ----------- | ---------- | -------------------- |
| **CPU**     | 2 cores    | 4+ cores             |
| **RAM**     | 4GB        | 8GB+                 |
| **Disk**    | 20GB       | 50GB+                |
| **Network** | NAT/Bridge | Bridge (recommended) |

#### Instalasi

Setelah VM dikonfigurasi, ikuti panduan instalasi sesuai OS guest:

-   **Windows VM:** Ikuti panduan Windows di atas
-   **Linux VM:** Ikuti panduan Linux di atas
-   **macOS VM:** Gunakan Docker Desktop untuk Mac

### Cloud VM (AWS/GCP/Azure)

#### AWS EC2

```bash title="Amazon Linux 2"
# Update system
sudo yum update -y

# Install Docker
sudo amazon-linux-extras install docker

# Start Docker service
sudo service docker start

# Add ec2-user to docker group
sudo usermod -a -G docker ec2-user

# Log out and log back in
exit
```

#### Google Cloud VM

```bash title="Ubuntu on GCP"
# Update system
sudo apt-get update

# Install Docker using convenience script
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Add user to docker group
sudo usermod -aG docker $USER

# Start Docker
sudo systemctl start docker
```

#### Azure VM

```bash title="Ubuntu on Azure"
# Update system
sudo apt-get update

# Install Docker
sudo apt-get install docker.io

# Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# Add user to docker group
sudo usermod -aG docker $USER
```

## ðŸ§ª Verifikasi dan Testing

Setelah instalasi selesai, lakukan testing berikut:

### Test Basic Commands

```bash
# Cek versi Docker
docker --version

# Cek info sistem Docker
docker info

# Cek status service Docker
docker system info
```

### Test Container Functionality

```bash
# Test dengan hello-world
docker run hello-world

# Test dengan Ubuntu container
docker run -it ubuntu:latest bash

# Test dengan web server
docker run -d -p 8080:80 nginx:latest

# Cek running containers
docker ps

# Stop dan remove containers
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)
```

### Test Docker Compose

```bash
# Cek versi Docker Compose
docker compose version

# Test dengan simple docker-compose.yml
mkdir test-compose && cd test-compose

cat > docker-compose.yml << EOF
version: '3.8'
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
EOF

# Run dengan compose
docker compose up -d

# Stop dan cleanup
docker compose down
```

## ðŸ”§ Troubleshooting

### Common Issues & Solutions

#### 1. **Permission Denied (Linux)**

```bash
# Error: permission denied while trying to connect to the Docker daemon
# Solution: Add user to docker group
sudo usermod -aG docker $USER
newgrp docker
```

#### 2. **Virtualization Not Enabled (Windows)**

!!! warning "BIOS Setting"
Masuk ke BIOS/UEFI dan aktifkan: - Intel: **Intel VT-x** - AMD: **AMD-V** - **Hyper-V** (untuk Windows Pro/Enterprise)

#### 3. **WSL 2 Kernel Update Required**

```powershell
# Download dan install WSL 2 kernel update
# https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi
```

#### 4. **Docker Desktop Won't Start (Mac)**

```bash
# Reset Docker Desktop
rm -rf ~/Library/Group\ Containers/group.com.docker
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/.docker

# Reinstall Docker Desktop
```

#### 5. **Out of Disk Space**

```bash
# Clean up Docker
docker system prune -a

# Remove unused volumes
docker volume prune

# Check disk usage
docker system df
```

## âœ… Checklist Post-Installation

Setelah instalasi selesai, pastikan:

-   [ ] `docker --version` menampilkan versi yang terinstall
-   [ ] `docker run hello-world` berjalan tanpa error
-   [ ] `docker ps` dapat dijalankan tanpa sudo (Linux/Mac)
-   [ ] Docker Desktop berjalan di background (Windows/Mac)
-   [ ] `docker compose version` menampilkan versi Compose
-   [ ] Dapat menjalankan container web server (nginx)
-   [ ] Firewall/antivirus tidak memblokir Docker

## ðŸŽ¯ Konfigurasi Lanjutan

### Docker Hub Authentication

```bash
# Login ke Docker Hub
docker login

# Atau dengan token
echo "YOUR_TOKEN" | docker login --username YOUR_USERNAME --password-stdin
```

### Memory & CPU Limits (Docker Desktop)

```json title="Docker Desktop Settings"
{
    "memoryMiB": 4096,
    "cpus": 4,
    "diskSizeMiB": 61440
}
```

### Enable BuildKit

```bash
# Enable Docker BuildKit (experimental features)
export DOCKER_BUILDKIT=1

# Atau set di daemon.json
echo '{"features": {"buildkit": true}}' | sudo tee /etc/docker/daemon.json
sudo systemctl restart docker
```

## ðŸš€ Langkah Selanjutnya

Selamat! Docker sudah terinstall di sistem Anda. Sekarang Anda siap untuk:

1. [**Menjalankan Container Pertama â†’**](1.3-your-first-container.md)
2. Explore Docker Hub untuk mencari images
3. Membuat Dockerfile pertama
4. Setup development environment dengan Docker

---

!!! success "Installation Complete!"
Docker sudah siap digunakan! Jangan lupa untuk restart terminal atau log out/in jika ada masalah permission di Linux.

!!! tip "Pro Tip"
Selalu update Docker ke versi terbaru untuk mendapatkan fitur dan security fix terbaru. Gunakan `docker version` untuk mengecek versi yang terinstall.

!!! info "Need Help?"
Jika mengalami masalah instalasi, cek [Docker Documentation](https://docs.docker.com/) atau tanyakan di [Docker Community](https://forums.docker.com/).
